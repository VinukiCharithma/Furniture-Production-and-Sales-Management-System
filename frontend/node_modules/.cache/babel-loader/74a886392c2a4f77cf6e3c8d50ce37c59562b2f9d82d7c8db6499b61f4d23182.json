{"ast":null,"code":"export const getProductImageUrl = imagePath => {\n  // Use absolute path from public folder\n  const placeholder = `${process.env.PUBLIC_URL}/images/placeholder-product.jpg`;\n  if (!imagePath) return placeholder;\n\n  // If it's already a full URL or data URL, return as-is\n  if (imagePath.startsWith('http') || imagePath.startsWith('data:')) {\n    return imagePath;\n  }\n\n  // Remove any leading slashes\n  const cleanPath = imagePath.replace(/^\\/+/, '');\n\n  // Handle cases where path might be malformed\n  if (cleanPath.includes('images/products/')) {\n    return `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/${cleanPath}`;\n  }\n  return `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/images/products/${cleanPath}`;\n};\nexport const handleImageError = e => {\n  // Create a base64 encoded SVG as ultimate fallback\n  const svgPlaceholder = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjYWFhIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==';\n\n  // If we're already showing the SVG, do nothing\n  if (e.target.src === svgPlaceholder) return;\n  console.error('Image failed to load:', e.target.src);\n\n  // First try the regular placeholder\n  if (!e.target.src.includes('placeholder-product.jpg')) {\n    e.target.src = `${process.env.PUBLIC_URL}/images/placeholder-product.jpg`;\n    e.target.style.objectFit = 'contain';\n    return;\n  }\n\n  // If that fails, use the SVG fallback\n  e.target.src = svgPlaceholder;\n  e.target.style.objectFit = 'contain';\n\n  // Remove error handler to prevent loops\n  e.target.onerror = null;\n};","map":{"version":3,"names":["getProductImageUrl","imagePath","placeholder","process","env","PUBLIC_URL","startsWith","cleanPath","replace","includes","REACT_APP_API_URL","handleImageError","e","svgPlaceholder","target","src","console","error","style","objectFit","onerror"],"sources":["E:/SLIT/Y2S2/ITProject/frontend/src/utils/imageUtils.js"],"sourcesContent":["export const getProductImageUrl = (imagePath) => {\r\n  // Use absolute path from public folder\r\n  const placeholder = `${process.env.PUBLIC_URL}/images/placeholder-product.jpg`;\r\n  \r\n  if (!imagePath) return placeholder;\r\n  \r\n  // If it's already a full URL or data URL, return as-is\r\n  if (imagePath.startsWith('http') || imagePath.startsWith('data:')) {\r\n    return imagePath;\r\n  }\r\n  \r\n  // Remove any leading slashes\r\n  const cleanPath = imagePath.replace(/^\\/+/, '');\r\n  \r\n  // Handle cases where path might be malformed\r\n  if (cleanPath.includes('images/products/')) {\r\n    return `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/${cleanPath}`;\r\n  }\r\n  \r\n  return `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/images/products/${cleanPath}`;\r\n};\r\n\r\nexport const handleImageError = (e) => {\r\n  // Create a base64 encoded SVG as ultimate fallback\r\n  const svgPlaceholder = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjYWFhIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==';\r\n  \r\n  // If we're already showing the SVG, do nothing\r\n  if (e.target.src === svgPlaceholder) return;\r\n  \r\n  console.error('Image failed to load:', e.target.src);\r\n  \r\n  // First try the regular placeholder\r\n  if (!e.target.src.includes('placeholder-product.jpg')) {\r\n    e.target.src = `${process.env.PUBLIC_URL}/images/placeholder-product.jpg`;\r\n    e.target.style.objectFit = 'contain';\r\n    return;\r\n  }\r\n  \r\n  // If that fails, use the SVG fallback\r\n  e.target.src = svgPlaceholder;\r\n  e.target.style.objectFit = 'contain';\r\n  \r\n  // Remove error handler to prevent loops\r\n  e.target.onerror = null;\r\n};"],"mappings":"AAAA,OAAO,MAAMA,kBAAkB,GAAIC,SAAS,IAAK;EAC/C;EACA,MAAMC,WAAW,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU,iCAAiC;EAE9E,IAAI,CAACJ,SAAS,EAAE,OAAOC,WAAW;;EAElC;EACA,IAAID,SAAS,CAACK,UAAU,CAAC,MAAM,CAAC,IAAIL,SAAS,CAACK,UAAU,CAAC,OAAO,CAAC,EAAE;IACjE,OAAOL,SAAS;EAClB;;EAEA;EACA,MAAMM,SAAS,GAAGN,SAAS,CAACO,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;;EAE/C;EACA,IAAID,SAAS,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE;IAC1C,OAAO,GAAGN,OAAO,CAACC,GAAG,CAACM,iBAAiB,IAAI,uBAAuB,IAAIH,SAAS,EAAE;EACnF;EAEA,OAAO,GAAGJ,OAAO,CAACC,GAAG,CAACM,iBAAiB,IAAI,uBAAuB,oBAAoBH,SAAS,EAAE;AACnG,CAAC;AAED,OAAO,MAAMI,gBAAgB,GAAIC,CAAC,IAAK;EACrC;EACA,MAAMC,cAAc,GAAG,oWAAoW;;EAE3X;EACA,IAAID,CAAC,CAACE,MAAM,CAACC,GAAG,KAAKF,cAAc,EAAE;EAErCG,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEL,CAAC,CAACE,MAAM,CAACC,GAAG,CAAC;;EAEpD;EACA,IAAI,CAACH,CAAC,CAACE,MAAM,CAACC,GAAG,CAACN,QAAQ,CAAC,yBAAyB,CAAC,EAAE;IACrDG,CAAC,CAACE,MAAM,CAACC,GAAG,GAAG,GAAGZ,OAAO,CAACC,GAAG,CAACC,UAAU,iCAAiC;IACzEO,CAAC,CAACE,MAAM,CAACI,KAAK,CAACC,SAAS,GAAG,SAAS;IACpC;EACF;;EAEA;EACAP,CAAC,CAACE,MAAM,CAACC,GAAG,GAAGF,cAAc;EAC7BD,CAAC,CAACE,MAAM,CAACI,KAAK,CAACC,SAAS,GAAG,SAAS;;EAEpC;EACAP,CAAC,CAACE,MAAM,CAACM,OAAO,GAAG,IAAI;AACzB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}